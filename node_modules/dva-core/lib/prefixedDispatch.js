'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

exports.default = prefixedDispatch;

var _invariant = require('invariant');

var _invariant2 = _interopRequireDefault(_invariant);

var _warning = require('warning');

var _warning2 = _interopRequireDefault(_warning);

var _constants = require('./constants');

var _prefixType = require('./prefixType');

var _prefixType2 = _interopRequireDefault(_prefixType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function prefixedDispatch(dispatch, model) {
  return function (action) {
    var type = action.type;

    (0, _invariant2.default)(type, 'dispatch: action should be a plain Object with type');
    (0, _warning2.default)(type.indexOf('' + model.namespace + _constants.NAMESPACE_SEP) !== 0, 'dispatch: ' + type + ' should not be prefixed with namespace ' + model.namespace);
    return dispatch((0, _extends3.default)({}, action, { type: (0, _prefixType2.default)(type, model) }));
  };
}
module.exports = exports['default'];